# effective javascript

summary of effective javascript

## Table of Contents

- [Accustoming Yourself to Javascript](#accustoming-yourself-to-javascript)
- [Variable Scope](#variable-scope)
- [Working with Functions](#working-with-functions)
- [Object and Prototype](#object-and-prototype)
- [Arrays and Dictionary](#arrays-and-dictionary)
- [Library and API Design](#library-and-api-design)
- [Concurrency](#concurrency)

## Accustoming Yourself to Javascript

> 1.äº†è§£ä½ ä½¿ç”¨çš„jsç‰ˆæœ¬ã€‚

1.1 æ€»æ˜¯åœ¨æ‰§è¡Œä¸¥æ ¼æ¨¡å¼æ£€æŸ¥çš„ç¯å¢ƒä¸­æµ‹è¯•ä¸¥æ ¼ä»£ç ï¼Œå°½é‡ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ç¼–å†™ä»£ç ï¼Œå¹¶æ˜¾ç¤ºåœ°å°†ä»£ç å†…å®¹åŒ…è£¹åœ¨æœ¬åœ°å¯ç”¨äº†ä¸¥æ ¼æ¨¡å¼çš„å‡½æ•°ä¸­ï¼›

(1) å¯ç”¨ç¨‹åºçš„ä¸¥æ ¼æ¨¡å¼
```javascript
    "use strict"
    //...
    function(){
        //...
    }
```
(2) å¯ç”¨å‡½æ•°çš„ä¸¥æ ¼æ¨¡å¼
```javascript
    //...
    function(){
        "use strict"
        //...
    }
```
(3) æœ€ä½³å®è·µï¼ˆç°åœ¨æ¨¡å—ç³»ç»Ÿåœ¨è„šæœ¬é“¾æ¥çš„æ—¶å€™å®ç°æ–¹å¼å°±æ˜¯è¿™æ ·çš„ï¼‰
```javascript
    // best practice
    (function(){
        "use strict"
        function f(){
            //......
        }
        //....
    })();
```
> **Note**: ç”±äº"use strict"æŒ‡ä»¤åªæœ‰åœ¨è„šæœ¬æˆ–è€…å‡½æ•°çš„é¡¶éƒ¨æ‰èƒ½ç”Ÿæ•ˆï¼Œå¯¼è‡´å®é™…é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç”±äºé“¾æ¥å¤šä¸ªæ¨¡å¼ä¸ä¸€è‡´çš„æ–‡ä»¶å¯èƒ½å¯¼è‡´ä¸€äº›æ²¡æœ‰å¯ç”¨ä¸¥æ ¼æ¨¡å¼çš„
æ–‡ä»¶ï¼ˆæ¨¡å—ï¼‰å¯ç”¨äº†ä¸¥æ ¼æ¨¡å¼ï¼Œä»è€Œå¼•å‘æ½œåœ¨çš„å…¼å®¹æ€§é—®é¢˜ã€‚æˆ–è€…å³ä½¿ä½ è‡ªå·±ä¿è¯åœ¨è‡ªå·±çš„ç¼–å†™æ‰€æœ‰ä»£ç éƒ½å¯ç”¨ä¸¥æ ¼æ¨¡å¼æˆ–è€…éƒ½æ²¡æœ‰å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä½†æ˜¯åœ¨å¤šäººåä½œçš„å¤§å‹é¡¹ç›®ä¸­æˆ–è€…å¼•ç”¨å¤–éƒ¨åº“æ–‡ä»¶çš„åœºæ™¯ä¸­ï¼Œ
æ›´æœ¬æ— æ³•ä¿è¯æœ€ç»ˆé“¾æ¥æ–‡ä»¶çš„è¿è¡Œæ¨¡å¼ã€‚
.

> 2.ç†è§£jsçš„æµ®ç‚¹æ•°ã€‚
ï¼ˆ1ï¼‰jsä¸­åªæœ‰ä¸€ç§æ•°å€¼å‹æ•°æ®ç±»å‹ï¼Œå°±æ˜¯åŒç²¾åº¦æµ®ç‚¹å‹ï¼ˆ64ä½ï¼‰ï¼Œä½†æ˜¯æµ®ç‚¹æ•°å´æœ€å­˜åœ¨ä¸€ä¸ªè‡´å‘½çš„ç²¾åº¦é™·é˜±ï¼Œä¸€ä¸ªæœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯å°½å¯èƒ½çš„é‡‡ç”¨æ•´æ•°è¿ç®—ã€‚
```javascript
    0.1 + 0.2 =
    0.30000000000000004
```
ï¼ˆ2ï¼‰å¯¹äºä½è¿ç®—ï¼Œé¦–å…ˆä¼šå°†æ“ä½œæ•°è½¬åŒ–ä¸º32ä½æ•´æ•°ï¼Œç„¶åä½¿ç”¨æ•´æ•°çš„ä½æ¨¡å¼è¿›è¡Œè¿ç®—ï¼Œæœ€åå°†ç»“æœè½¬åŒ–jsæ ‡å‡†çš„æµ®ç‚¹æ•°ã€‚

> 3.å½“å¿ƒæ•°æ®ç±»å‹çš„éšå¼è½¬æ¢ã€‚

javascriptä¸­æä¾›äº†6ä¸­æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬5ä¸­ç®€å•æ•°æ®ç±»å‹ï¼ˆæˆ–è€…ç§°åŸºæœ¬æ•°æ®ç±»å‹ï¼‰(nullã€undefinedã€booleanã€stringä»¥åŠnumber)å’Œ1ä¸­å¤æ‚æ•°æ®ç±»å‹object.

ï¼ˆ1ï¼‰ç®—æ•°è¿ç®—
è®¡ç®—ä¹‹å‰ç®—æœ¯è¿ç®—ä¼šå°è¯•æŠŠæ“ä½œæ•°è½¬åŒ–ä¸ºæ•°å­—ç±»å‹ï¼Œ'ï¼‹'è¿ç®—æµ®é™¤å¤–ï¼›
```javascript
    null -------------> 0
    undefined --------> NaN
    false/true -------> 0/1
    object -----------> é€šè¿‡æœŸvalueOfæ–¹æ³•è½¬åŒ–ä¸ºæ•°å­—

    1 + null = 1;
    1 + false = 1;
    1 + true = 2;
    1 + undefined = NaN;
    1 + {valueOf: function(){return 3;}} = 4;
```
ï¼ˆ2ï¼‰ä½è¿ç®—
è®¡ç®—ä¹‹å‰ç®—æœ¯è¿ç®—ä¼šå°è¯•æŠŠæ“ä½œæ•°è½¬åŒ–ä¸º32ä½æ•´æ•°ç±»å‹ï¼›

ï¼ˆ3ï¼‰ï¼‹è¿ç®—ç¬¦
ï¼‹è¿ç®—ç¬¦æ—¢é‡è½½äº†æ•°å­—ç›¸åŠ ï¼Œåˆé‡è½½äº†å­—ç¬¦ä¸²è¿æ¥æ“ä½œï¼Œå½“ï¼‹è¿ç®—ç¬¦ä¸¤ä¸ªæ“ä½œæ•°ä¸€ä¸ªä¸ºå­—ç¬¦ä¸²ä¸€ä¸ªä¸ºæ•°å­—ç±»å‹æ—¶ï¼Œï¼‹è¿ç®—ç¬¦æ›´åçˆ±è¿›è¡Œå­—ç¬¦ä¸²è¿æ¥æ“ä½œï¼›
```javascript
    number(0) -------------> "0"
    undefined -------------> "undefined"
    false/true ------------> "false/true"
    object ----------------> é€šè¿‡toStringæ–¹æ³•è½¬åŒ–ä¸ºå­—ç¬¦ä¸²

    "aaa" + null = "aaanull";
    "aaa" + false = "aaafalse";
    "aaa" + true = "aaatrue";
    "aaa" + undefined = "aaaundefined";
    "aaa" + {toString: function(){return "bbb";}} = "aaabbb";
```

ï¼ˆ4ï¼‰çœŸå€¼è¿ç®—ï¼ˆif || &&ï¼‰
jsä¸­æœ‰7ä¸ªå‡å€¼: falseã€ï¼‹0ã€ï¼0ã€nullã€undefinedã€NaNã€"";

ï¼ˆ5ï¼‰å…³ç³»è¿ç®—
```javascript
    1ã€==è¿ç®—æµ®
    null  == undefined                      true
    null/undefined == å…¶å®ƒénull/undefined   false
    åŸå§‹ç±»å‹(string/number/boolean)  ==  åŸå§‹ç±»å‹(string/number/boolean)      å°†åŸå§‹ç±»å‹è½¬åŒ–ä¸ºæ•°å­—
    åŸå§‹ç±»å‹(string/number/boolean)  ==  Dateå¯¹è±¡                            å°†åŸå§‹ç±»å‹è½¬åŒ–ä¸ºæ•°å­—ï¼Œå°†Dateè½¬åŒ–ä¸ºåŸå§‹ç±»å‹(ä¼˜å…ˆä½¿ç”¨toStringï¼Œå†å°è¯•valueOf)
    åŸå§‹ç±»å‹(string/number/boolean)  ==  éDateå¯¹è±¡                          å°†åŸå§‹ç±»å‹è½¬åŒ–ä¸ºæ•°å­—ï¼Œå°†éDateå¯¹è±¡è½¬åŒ–ä¸ºåŸå§‹ç±»å‹(ä¼˜å…ˆä½¿ç”¨valueOfï¼Œå†å°è¯•toString)
    //ä½¿ç”¨==è¿ç®—ç¬¦ä¼šåº”ç”¨ä¸€å¥—å¤æ‚çš„éšå¼å¼ºåˆ¶è½¬æ¢è§„åˆ™ï¼Œå½“æ¯”è¾ƒä¸åŒç±»å‹çš„æ•°æ®ç±»å‹æ—¶ï¼Œä½¿ç”¨è‡ªå·±çš„æ˜¾ç¤ºå¼ºåˆ¶è½¬æ¢æ–¹æ³•ä½¿å¾—ç¨‹åºçš„è¡Œä¸ºèƒ½ç»™æ›´å¥½çš„è¢«ç†è§£ï¼Œå°½é‡ä½¿ç”¨===è¿ç®—ç¬¦ï¼›
```

> **Note**: éšå¼åœ°å¼ºåˆ¶ç±»å‹è½¬åŒ–è™½ç„¶èƒ½å¤Ÿæœ‰æ—¶å€™å¸¦æ¥éå†ï¼Œä½†åŒæ—¶ç»™æœ‰é—®é¢˜ç¨‹åºçš„è°ƒè¯•å¸¦æ¥äº†æŒ‘æˆ˜ï¼Œå› ä¸ºå®ƒæ©ç›–äº†é”™è¯¯ï¼Œä½¿å¾—é”™è¯¯æ›´éš¾è¯Šæ–­ï¼›
åŒæ—¶ä¸ºäº†é¿å…éšå¼åœ°å¼ºåˆ¶ç±»å‹è½¬åŒ–æ½œåœ¨çš„é£é™©ï¼Œåº”è¯¥å°½é‡é¿å…å¯¹æ··åˆç±»å‹ä½¿ç”¨==è¿ç®—ç¬¦ï¼›

> 4.äº†è§£åˆ†å·æ’å…¥çš„å±€é™ã€‚


> 5.Think of Strings As Sequences of 16-Bit Code Units

ç°åœ¨unicodeä»£ç ç‚¹ç”±20ä½äºŒè¿›åˆ¶æ•°æ¥è¡¨ç¤ºï¼Œå…¶ä¸­æœ€åˆè®¾å®šçš„$(2)^16ä¸ªç ç‚¹ç§°ä¸ºåŸºæœ¬å¤šæ–‡ä»¶å¹³é¢ï¼Œä½™ä¸‹16ä¸ªå¤§å°ä¸º$(2)^16dçš„èŒƒå›´è¢«ç§°ä¸ºè¾…åŠ©å¹³é¢ï¼›
unicodeä»£ç ç‚¹ä¸ç¼–ç å…ƒç´ ä¸€ä¸€å¯¹åº”ï¼Œutf-16ä¸­æ¯ä¸ªä»£ç ç‚¹éœ€è¦ä¸€åˆ°ä¸¤ä¸ª16ä½çš„ä»£ç å•å…ƒæ¥è¡¨ç¤ºï¼Œå› æ­¤utfï¼16æ˜¯å¯å˜é•¿åº¦çš„ç¼–ç ï¼›
javascriptå­—ç¬¦ä¸²ä¸­æ˜¯é‡‡ç”¨çš„æ˜¯16ä½çš„ä»£ç å•å…ƒï¼Œå› æ­¤å­—ç¬¦ä¸²æ–¹æ³•å’Œå±æ€§éƒ½æ˜¯åŸºäºä»£ç å•å…ƒå±‚çº§ï¼Œè€Œä¸æ˜¯ä»£ç ç‚¹å±‚çº§ï¼Œå› æ­¤å½“å­—ç¬¦ä¸²ä¸­åŒ…å«è¾…åŠ©å¹³é¢çš„ä»£ç ç‚¹çš„æ—¶å€™
jså­—ç¬¦ä¸²ä¸­è¯¥ä»£ç ç‚¹è¡¨ç¤ºé•¿åº¦ä¸º2ï¼›
```javascript
"ğŸ’©".length = 2
```
> **Note**: å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ¥ç¼–å†™å¯è¯†åˆ«ä»£ç ç‚¹çš„å­—ç¬¦ä¸²æ“ä½œï¼›

<sup>[(back to table of contents)](#table-of-contents)</sup>

## Variable Scope

> 6.å°½é‡ç”¨å±€éƒ¨å˜é‡ï¼Œè€Œä¸æ˜¯å…¨å±€å˜é‡ï¼Œä½¿ç”¨å…¨å±€å¯¹è±¡æ¥åšå¹³å°ç‰¹æ€§æ£€æµ‹ã€‚

**Note**: æ•…æ„åˆ›å»ºå…¨å±€å˜é‡æ˜¯ä¸å¥½çš„é£æ ¼ï¼Œè€Œæ„å¤–çš„åˆ›å»ºå…¨å±€å˜é‡åˆ™æ˜¯å½»å¤´å½»å°¾çš„ç¾éš¾ï¼Œå› æ­¤å®é™…é¡¹ç›®ä¸­æ¨èç¨‹åºå‘˜ä½¿ç”¨lintç­‰å·¥å…·æ¥æ£€æµ‹ç¨‹åºä¸­ä¸å¥½çš„é£æ ¼å’Œæ½œåœ¨çš„é”™è¯¯ï¼›

> 7.ç†Ÿç»ƒä½¿ç”¨é—­åŒ…ã€‚
ï¼ˆ1ï¼‰ definition
æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ï¼›
ï¼ˆ2ï¼‰ feature
å³æ—¶å¤–éƒ¨å‡½æ•°å·²ç»è¿”å›ï¼Œé—­åŒ…ä»»ç„¶å¯ä»¥å¼•ç”¨å¤–éƒ¨å‡½æ•°å®šä¹‰çš„å˜é‡ï¼›
```javascript
    function FullName(firstName){
        return function(lastName){
            return firstName + " " + lastName;
        };
    }
    var firtNameLin =  FullName("lin");
    firtNameLin("chengyong"); // lin chengyong
    firtNameLin("chengjia"); // lin chengjia
```
**Note**: é—­åŒ…ä¼šå­˜å‚¨å¯¹å¤–éƒ¨å˜é‡çš„å¼•ç”¨ï¼›é—­åŒ…æ˜¯jsæœ€ä¼˜é›…ï¼Œæœ€æœ‰è¡¨ç°åŠ›çš„ç‰¹æ€§ä¹‹ä¸€ï¼›

é—­åŒ…å¯ä»¥æ›´æ–°å¤–éƒ¨å˜é‡çš„å€¼ï¼›å› ä¸ºé—­åŒ…å­˜å‚¨äº†å¤–éƒ¨å˜é‡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å®ƒä»¬çš„å‰¯æœ¬ï¼Œå› æ­¤ï¼Œå®ƒå¯ä»¥æ›´æ–°å¤–éƒ¨å˜é‡çš„å€¼ï¼›
```javascript
    function Person(){
        var name = "";
        return{
            set: function(val){name=val;},
            get: function(){return name;}
        }
    }
    var person = Person();
    person.set("jack");
    person.get()// jack
```

> 8.ç†è§£å˜é‡çš„å£°æ˜çš„æå‡ã€‚



> 9.å…³äºevalå‡½æ•°çš„ä½¿ç”¨ã€‚



> 10.


<sup>[(back to table of contents)](#table-of-contents)</sup>

## Working with Functions



<sup>[(back to table of contents)](#table-of-contents)</sup>

## Object and Prototype


<sup>[(back to table of contents)](#table-of-contents)</sup>

## Arrays and Dictionary



<sup>[(back to table of contents)](#table-of-contents)</sup>

## Library and API Design



<sup>[(back to table of contents)](#table-of-contents)</sup>

## Concurrency

<sup>[(back to table of contents)](#table-of-contents)</sup>
